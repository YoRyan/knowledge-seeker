{% import 'base.html' as base %}
{% import 'browser.html' as browser %}
{% extends 'base.html' %}

{% set episode_kwargs = { 'season': season.slug, 'episode': episode.slug } %}

{% block title %}
{% if current_line is none %}
        {{ episode.name }} - {{ season.name }}
{% else %}
        "{{ current_line }}" - {{ episode.name}} - {{ season.name }}
{% endif %}
{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='moment.css') }}">
{{ base.jquery() }}
{% endblock %}

{% block header %}
{% if season.icon is not none %}
<a href="{{ url_for('explorer.browse_season', season=season.slug) }}">
        <img class="season-icon"
             src="{{ url_for('explorer.season_icon', season=season.slug) }}"
             alt=""></a>
{% endif %}
<a href="{{ url_for('explorer.browse_season', season=season.slug) }}">{{ season.name }}</a> |
<a href="{{ url_for('explorer.browse_episode', **episode_kwargs) }}">{{ episode.name }}</a>
{% endblock %}

{% block content %}
<section id="browser">
{% call(nav)
   browser.show_time(season, episode, timecode, subtitles) %}{{ url_for('explorer.browse_moment', timecode=nav, **episode_kwargs) }}{% endcall %}
{% call(nav)
   browser.show_nav_times(season, episode, timecode, step_times) %}{{ url_for('explorer.browse_moment', timecode=nav, **episode_kwargs) }}{% endcall %}
</section>

<section id="dual-controls">
        <span class="split-links">
                <a class="media-link split"
                   href="{{ url_for('explorer.browse_dual_moments', first_timecode=split_timecodes[0], second_timecode=split_timecodes[1], **episode_kwargs) }}">
                        Animation View
                </a>
        </span>
        <span class="video-links">
                <span class="media-link disabled">GIF</span>
                <span class="media-link disabled">GIF+Sub</span>
                <span class="media-link disabled">WEBM</span>
                <span class="media-link disabled">WEBM+Sub</span>
        </span>
</section>

<script src="{{ url_for('static', filename='moment.js') }}"></script>
{% endblock %}
